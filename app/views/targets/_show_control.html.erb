<table style="border-style:none">
<tr>
<td style="width:25%">
<span class='button'><%= link_to 'Back to List', targets_path %></span>
</td>
<td style="text-align:center">
<% if user_signed_in? && @target.editable?(current_user) -%>
  <span class='button'><%= link_to 'Edit', edit_target_path(@target) %></span>
  <span class='button'><%= link_to 'Delete', @target, method: :delete, data: { confirm: 'Are you sure?' } %></span>
  <span class='button <%= 'button--disabled' if @lexical_index_request_alive %>'>
    <% if @lexical_index_request_alive %>
      Lexical Index
    <% else %>
      <%= link_to 'Lexical Index', target_lexical_index_request_path(params[:id]), method: :create %>
    <% end %>
    <a href="#request-error-detail" rel="facebox"><%=raw @lexical_index_request&.state_icon_for_view %></a>
  </span>
  <% if @lexical_index_request %>
    <% if @lexical_index_request.error? %>
      <div id="request-error-detail" class="help">
        <h1>Error detail</h1>
        <p><%= @lexical_index_request.latest_error %></p>
      </div>
    <% end %>
    <% if @lexical_index_request.finished? %>
      <%= link_to raw('<i class="request-state fa fa-book" aria-hidden="true"></i>'), target_instance_dictionary_path(params[:id], format: :csv), title: 'instance dictionory' %>
      <%= link_to raw('<i class="request-state fa fa-book" aria-hidden="true"></i>'), target_class_dictionary_path(params[:id], format: :csv), title: 'class dictionory' %>
      <%= link_to raw('<i class="request-state fa fa-book" aria-hidden="true"></i>'), target_predicate_dictionary_path(params[:id], format: :csv), title: 'predicate dictionory' %>
    <% else %>
      <span class='button'>
        <%= link_to 'Cancel Lexical Index', target_lexical_index_request_path(params[:id]), method: :delete %>
      </span>
    <% end %>
  <% end %>
<% end %>
</td>
<td style="width:25%; text-align:right">
<span class='button'><%= link_to 'Open in LODQA', "http://lodqa.org/?target=#{@target.name}", title: "Open LODQA with this target" %></span>
</td>
</tr>
</table>
